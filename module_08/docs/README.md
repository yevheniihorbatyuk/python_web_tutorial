# –ú–æ–¥—É–ª—å 8: SQLAlchemy ORM + NoSQL, Cache, RabbitMQ

## üìã –ü–ª–∞–Ω –∑–∞–Ω—è—Ç—Ç—è (3‚Äì4 –≥–æ–¥–∏–Ω–∏)

### –ß–∞—Å—Ç–∏–Ω–∞ 1 ‚Äî SQLAlchemy + PostgreSQL (60‚Äì75 —Ö–≤)
1. –ß–æ–º—É ORM —ñ –∫–æ–ª–∏ raw SQL: –æ–≥–ª—è–¥ –ø–ª—é—Å—ñ–≤/–º—ñ–Ω—É—Å—ñ–≤.
2. –ú–æ–¥–µ–ª—ñ `Country ‚Üí City ‚Üí Address ‚Üí User`, one-to-many —Ç–∞ –∑–≤'—è–∑–∫–∏.
3. CRUD: –≤—Å—Ç–∞–≤–∫–∏, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, soft-delete –ø—Ä–∞–ø–æ—Ä–µ—Ü—å.
4. –ó–∞–ø–∏—Ç–∏: ¬´—É—Å—ñ –º—ñ—Å—Ç–∞ –ø–æ –∫—Ä–∞—ó–Ω–∞–º¬ª, ¬´—É—Å—ñ —é–∑–µ—Ä–∏, —â–æ –∂–∏–≤—É—Ç—å –≤ –£–∫—Ä–∞—ó–Ω—ñ¬ª.
5. –ú—ñ–≥—Ä–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ `Base.metadata.create_all` + –Ω–æ—Ç–∞—Ç–∫–∞ –ø—Ä–æ Alembic.

**–ü—Ä–∞–∫—Ç–∏–∫–∞:** `sqlalchemy_examples/models.py`, `sqlalchemy_examples/crud.py`, `sqlalchemy_examples/seed_data.py`.

### –ß–∞—Å—Ç–∏–Ω–∞ 2 ‚Äî MongoDB (45‚Äì60 —Ö–≤)
1. Atlas/Compass –±–∞–∑–æ–≤–∏–π –≤–æ—Ä–∫—Ñ–ª–æ—É, –∫–æ–ª–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ JOIN-–∏.
2. PyMongo CRUD, –∞–≥—Ä–µ–≥–∞—Ü—ñ—è –ø—ñ–¥ –≥–µ–æ-–∫–∞—Ç–∞–ª–æ–≥ (–º—ñ—Å—Ç–∞/–∫—Ä–∞—ó–Ω–∏).
3. Motor: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ –∑–∞–ø–∏—Ç–∏, –ø–æ–∫–∞–∑–∞—Ç–∏ latency —Ç–∞ –ø–∞—Ä–∞–ª–µ–ª—ñ–∑–º.
4. –í–∏–±—ñ—Ä –¥—Ä–∞–π–≤–µ—Ä–∞: PyMongo –¥–ª—è sync, Motor –¥–ª—è async / FastAPI.

**–ü—Ä–∞–∫—Ç–∏–∫–∞:** `mongodb_examples/01_pymongo_basics.py`, `mongodb_examples/02_motor_async.py`.

### –ß–∞—Å—Ç–∏–Ω–∞ 3 ‚Äî –ö–µ—à—É–≤–∞–Ω–Ω—è (20‚Äì30 —Ö–≤)
1. `functools.lru_cache` –Ω–∞ CPU-bound Fibonacci: —Ä—ñ–∑–Ω–∏—Ü—è —É —á–∞—Å—ñ.
2. –ö–µ—à –Ω–∞ Redis –¥–ª—è –¥–æ—Ä–æ–≥–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ (–æ–ø—Ü—ñ—è, –∑ graceful fallback —è–∫—â–æ –Ω–µ–º–∞ Redis).
3. –ü–æ–ª—ñ—Ç–∏–∫–∞ TTL —Ç–∞ —ñ–Ω–≤–∞–ª—ñ–¥–µ–π—à–Ω –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏.

**–ü—Ä–∞–∫—Ç–∏–∫–∞:** `caching/caching_fibonacci.py`.

### –ß–∞—Å—Ç–∏–Ω–∞ 4 ‚Äî –ß–µ—Ä–≥–∏ RabbitMQ (45‚Äì60 —Ö–≤)
1. –ù–∞–≤—ñ—â–æ —á–µ—Ä–≥–∏ –≤ DS/DE: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ ETL, –¥–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è, backpressure.
2. Producer —à–ª–µ –ø–æ–¥—ñ—ó `user.created`; consumer –∑–±–µ—Ä—ñ–≥–∞—î —É Mongo.
3. Idempotency —Ç–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è (manual ack).
4. –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∑ Kafka —Ç–∞ Redis Streams ‚Äî –∫–æ–ª–∏ —â–æ –æ–±—Ä–∞—Ç–∏.

**–ü—Ä–∞–∫—Ç–∏–∫–∞:** `messaging_rabbitmq/producer.py`, `messaging_rabbitmq/consumer.py`.

---

## üéØ –¶—ñ–ª—ñ

**–ü—ñ—Å–ª—è –º–æ–¥—É–ª—è –≤–∏ –∑–º–æ–∂–µ—Ç–µ:**
- –ü–∏—Å–∞—Ç–∏ ORM-–º–æ–¥–µ–ª—ñ SQLAlchemy 2.0 —Ç–∞ —Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç–∏ –∑ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏ –π join-–ª–æ–≥—ñ–∫–æ—é.
- –ë—É–¥—É–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–Ω—ñ —Å—Ö–µ–º–∏ –≤ Mongo —Ç–∞ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –¥–≤–æ–º–∞ –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏.
- –û—Ü—ñ–Ω—é–≤–∞—Ç–∏, –∫–æ–ª–∏ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ `lru_cache`, –∞ –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω Redis.
- –ó–∞–ø—É—Å–∫–∞—Ç–∏ –ø—Ä–æ—Å—Ç–∏–π event-driven –ª–∞–Ω—Ü—é–∂–æ–∫ –Ω–∞ RabbitMQ —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ø–æ–¥—ñ—ó.

---

## üõ† –°—Ç–µ–∫
- Python 3.11, SQLAlchemy 2.0, PostgreSQL 15
- MongoDB 6 (Atlas/Compass friendly)
- RabbitMQ 3, pika
- Redis 7 (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

## üìÇ –§–∞–π–ª–∏
- –ö–æ–¥: `sqlalchemy_examples/`, `mongodb_examples/`, `caching/`, `messaging_rabbitmq/`
- –î–æ–∫–∏: `docs/`
- –Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `docker-compose.yml`, `.env.example`

–ö–æ–º–±—ñ–Ω—É–π—Ç–µ –±–ª–æ–∫–∏ –ø—ñ–¥ —Å–≤—ñ–π —Å—Ü–µ–Ω–∞—Ä—ñ–π: –æ–∫—Ä–µ–º–æ ORM, –æ–∫—Ä–µ–º–æ Mongo/—á–µ—Ä–≥–∏ –∞–±–æ –ø–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫.
